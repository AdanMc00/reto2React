{"ast":null,"code":"var _jsxFileName = \"/home/adn/Documentos/bootcamp/reactReto2/react-6ta-gen/src/App.jsx\";\nimport React, { Component } from 'react';\nimport Navbar from './components/Navbar';\nimport Home from './views/Home';\nimport Post from './views/Post';\nimport LoginForm from './components/LoginForm';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authorization: ''\n    };\n  }\n\n  async onLogin(auth) {\n    try {\n      const response = await window.fetch('http://localhost:8080/users/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: auth.email,\n          password: auth.password\n        })\n      });\n      const payload = await response.json();\n      this.setState({\n        authorization: payload.data.token\n      });\n      window.sessionStorage.setItem('authorization', payload.data.token);\n    } catch (error) {\n      window.alert('Ocurri贸 un error al iniciar sesi贸n');\n    }\n  }\n\n  async componentDidMount() {\n    const token = window.sessionStorage.getItem('authorization');\n\n    if (token) {\n      const response = await window.fetch('http://localhost:8080/users/validate-session', {\n        headers: {\n          authorization: token\n        }\n      });\n      const payload = await response.json();\n      this.setState({\n        authorization: payload.data.token\n      });\n      window.sessionStorage.setItem('authorization', payload.data.token);\n    }\n  }\n\n  render() {\n    if (!this.state.authorization) {\n      return React.createElement(\"div\", {\n        className: \"app login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(LoginForm, {\n        onSubmit: this.onLogin.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(Post, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(Home, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/adn/Documentos/bootcamp/reactReto2/react-6ta-gen/src/App.jsx"],"names":["React","Component","Navbar","Home","Post","LoginForm","App","constructor","props","state","authorization","onLogin","auth","response","window","fetch","method","headers","body","JSON","stringify","email","password","payload","json","setState","data","token","sessionStorage","setItem","error","alert","componentDidMount","getItem","render","bind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAOC,IAAP,MAAiB,cAAjB;AAEA,OAAOC,SAAP,MAAsB,wBAAtB;;AAEA,MAAMC,GAAN,SAAkBL,SAAlB,CAA4B;AAC1BM,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,aAAa,EAAE;AADJ,KAAb;AAGD;;AAED,QAAMC,OAAN,CAAeC,IAAf,EAAqB;AACnB,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMC,MAAM,CAACC,KAAP,CAAa,mCAAb,EAAkD;AACvEC,QAAAA,MAAM,EAAE,MAD+D;AAEvEC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAF8D;AAGvEC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,UAAAA,KAAK,EAAET,IAAI,CAACS,KADO;AAEnBC,UAAAA,QAAQ,EAAEV,IAAI,CAACU;AAFI,SAAf;AAHiE,OAAlD,CAAvB;AASA,YAAMC,OAAO,GAAG,MAAMV,QAAQ,CAACW,IAAT,EAAtB;AAEA,WAAKC,QAAL,CAAc;AAAEf,QAAAA,aAAa,EAAEa,OAAO,CAACG,IAAR,CAAaC;AAA9B,OAAd;AAEAb,MAAAA,MAAM,CAACc,cAAP,CAAsBC,OAAtB,CAA8B,eAA9B,EAA+CN,OAAO,CAACG,IAAR,CAAaC,KAA5D;AACD,KAfD,CAeE,OAAOG,KAAP,EAAc;AACdhB,MAAAA,MAAM,CAACiB,KAAP,CAAa,oCAAb;AACD;AACF;;AAED,QAAMC,iBAAN,GAA2B;AACzB,UAAML,KAAK,GAAGb,MAAM,CAACc,cAAP,CAAsBK,OAAtB,CAA8B,eAA9B,CAAd;;AAEA,QAAIN,KAAJ,EAAW;AACT,YAAMd,QAAQ,GAAG,MAAMC,MAAM,CAACC,KAAP,CAAa,8CAAb,EAA6D;AAClFE,QAAAA,OAAO,EAAE;AAAEP,UAAAA,aAAa,EAAEiB;AAAjB;AADyE,OAA7D,CAAvB;AAIA,YAAMJ,OAAO,GAAG,MAAMV,QAAQ,CAACW,IAAT,EAAtB;AAEA,WAAKC,QAAL,CAAc;AAAEf,QAAAA,aAAa,EAAEa,OAAO,CAACG,IAAR,CAAaC;AAA9B,OAAd;AAEAb,MAAAA,MAAM,CAACc,cAAP,CAAsBC,OAAtB,CAA8B,eAA9B,EAA+CN,OAAO,CAACG,IAAR,CAAaC,KAA5D;AACD;AACF;;AAEDO,EAAAA,MAAM,GAAI;AACR,QAAI,CAAC,KAAKzB,KAAL,CAAWC,aAAhB,EAA+B;AAC7B,aACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAW,QAAA,QAAQ,EAAE,KAAKC,OAAL,CAAawB,IAAb,CAAkB,IAAlB,CAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD;;AAED,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAFF,CADF;AASD;;AAhEyB;;AAmE5B,eAAe7B,GAAf","sourcesContent":["import React, { Component } from 'react'\n\nimport Navbar from './components/Navbar'\n\nimport Home from './views/Home'\nimport Post from './views/Post'\n\nimport LoginForm from './components/LoginForm'\n\nclass App extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      authorization: ''\n    }\n  }\n\n  async onLogin (auth) {\n    try {\n      const response = await window.fetch('http://localhost:8080/users/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: auth.email,\n          password: auth.password\n        })\n      })\n\n      const payload = await response.json()\n\n      this.setState({ authorization: payload.data.token })\n\n      window.sessionStorage.setItem('authorization', payload.data.token)\n    } catch (error) {\n      window.alert('Ocurri贸 un error al iniciar sesi贸n')\n    }\n  }\n\n  async componentDidMount () {\n    const token = window.sessionStorage.getItem('authorization')\n\n    if (token) {\n      const response = await window.fetch('http://localhost:8080/users/validate-session', {\n        headers: { authorization: token }\n      })\n\n      const payload = await response.json()\n\n      this.setState({ authorization: payload.data.token })\n\n      window.sessionStorage.setItem('authorization', payload.data.token)\n    }\n  }\n\n  render () {\n    if (!this.state.authorization) {\n      return (\n        <div className='app login'>\n          <LoginForm onSubmit={this.onLogin.bind(this)} />\n        </div>\n      )\n    }\n\n    return (\n      <div className='app'>\n        <Navbar />\n        <div className='container'>\n          <Post />\n          <Home />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}